{
    "swagger": "2.0",
    "info": {
        "description": "This is the back-end API for an online library management system",
        "title": "Library Management API 文档",
        "contact": {},
        "version": "1.0"
    },
    "host": "localhost:3000",
    "basePath": "/",
    "paths": {
        "/books": {
            "get": {
                "description": "获取图书馆中的所有书籍，支持搜索 / Retrieve all books in the library, supports search",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "图书管理 / Book Management"
                ],
                "summary": "获取所有图书 / Get All Books",
                "parameters": [
                    {
                        "type": "string",
                        "description": "搜索关键词 / Search keyword",
                        "name": "search",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/controllers.Book"
                            }
                        }
                    },
                    "500": {
                        "description": "服务器错误 / Server error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            },
            "post": {
                "description": "添加一本新书到图书馆 / Add a new book to the library",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "图书管理 / Book Management"
                ],
                "summary": "添加新书 / Add a New Book",
                "parameters": [
                    {
                        "description": "书籍信息 / Book Information",
                        "name": "book",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.Book"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "无效的请求数据 / Invalid request body",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "数据库错误 / Database error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/books/{id}": {
            "get": {
                "description": "通过 ID 获取一本书的信息 / Retrieve details of a book by ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "图书管理 / Book Management"
                ],
                "summary": "获取单本图书 / Get a Book by ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "书籍 ID / Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "$ref": "#/definitions/controllers.Book"
                        }
                    },
                    "400": {
                        "description": "无效的图书 ID / Invalid book ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "图书未找到 / Book not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "服务器错误 / Server error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            },
            "put": {
                "description": "通过 ID 更新书籍信息 / Update book information by ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "图书管理 / Book Management"
                ],
                "summary": "更新图书 / Update a Book",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "书籍 ID / Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新后的书籍信息 / Updated Book Information",
                        "name": "book",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.Book"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "无效的图书 ID / Invalid book ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "图书未找到 / Book not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "数据库错误 / Database error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            },
            "delete": {
                "description": "通过 ID 删除书籍 / Delete a book by ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "图书管理 / Book Management"
                ],
                "summary": "删除图书 / Delete a Book",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "书籍 ID / Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "无效的图书 ID / Invalid book ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "图书未找到 / Book not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "数据库错误 / Database error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/borrow": {
            "post": {
                "description": "用户借阅书籍 / Users borrow a book",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "借阅管理 / Borrow Management"
                ],
                "summary": "借书 / Borrow a Book",
                "parameters": [
                    {
                        "description": "借书请求 / Borrow Request",
                        "name": "borrowRequest",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.BorrowRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "无效的请求数据 / Invalid request data",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "图书未找到 / Book not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "数据库错误 / Database error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/borrow/return": {
            "post": {
                "description": "用户归还书籍 / Users return a book",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "借阅管理 / Borrow Management"
                ],
                "summary": "还书 / Return a Book",
                "parameters": [
                    {
                        "description": "还书请求 / Return Request",
                        "name": "returnRequest",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.BorrowRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "无效的请求数据 / Invalid request data",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "没有找到借阅记录 / No active borrow record found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "数据库错误 / Database error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/login": {
            "post": {
                "description": "允许用户登录并获取 JWT 令牌 / Allows users to log in and receive a JWT token",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "认证 / Authentication"
                ],
                "summary": "用户登录 / User Login",
                "parameters": [
                    {
                        "description": "用户登录信息 / User Login Credentials",
                        "name": "credentials",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.LoginCredentials"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "请求数据无效 / Invalid request data",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "401": {
                        "description": "无效的用户名或密码 / Invalid username or password",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "服务器错误 / Server error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/register": {
            "post": {
                "description": "允许用户注册新账号 / Allows users to register a new account",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "认证 / Authentication"
                ],
                "summary": "用户注册 / User Registration",
                "parameters": [
                    {
                        "description": "用户信息 / User Information",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.User"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "成功响应 / Success Response",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "请求数据无效 / Invalid request data",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "服务器错误 / Server error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "controllers.Book": {
            "type": "object",
            "properties": {
                "author": {
                    "type": "string"
                },
                "available_copies": {
                    "type": "integer"
                },
                "genre": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "isbn": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "shelf_number": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "controllers.BorrowRequest": {
            "type": "object",
            "properties": {
                "bookId": {
                    "type": "integer"
                },
                "userId": {
                    "type": "integer"
                }
            }
        },
        "controllers.LoginCredentials": {
            "type": "object",
            "properties": {
                "password": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "controllers.User": {
            "type": "object",
            "properties": {
                "password": {
                    "type": "string"
                },
                "role": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        }
    }
}